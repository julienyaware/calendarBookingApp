(this.webpackJsonpcareerfoundrycalendar=this.webpackJsonpcareerfoundrycalendar||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),r=n(30),o=n.n(r),s=(n(38),n(39),n(18)),i=n.n(s),l=n(31),j=n(11),b=n(33),u=n(14),d=n.n(u),m=n(21);m.a.initializeApp({apiKey:"AIzaSyAuaVTE7wtP582PjgobKVYHYEwc6u_erVI",authDomain:"cfchallenge-a1270.firebaseapp.com",databaseURL:"https://cfchallenge-a1270-default-rtdb.firebaseio.com",projectId:"cfchallenge-a1270",storageBucket:"cfchallenge-a1270.appspot.com",messagingSenderId:"964995108794",appId:"1:964995108794:web:498affa58cfe1b4a239783",measurementId:"G-5PCYTL29HJ"});var p=m.a.firestore(),f=n(6);var O=function(e){var t=e.selectedSlotDateAndTime,n=Object(a.useState)(""),c=Object(j.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(""),i=Object(j.a)(s,2),l=(i[0],i[1],Object(a.useState)("")),b=Object(j.a)(l,2),u=b[0],d=b[1],m=Object(a.useState)(!1),O=Object(j.a)(m,2),h=O[0],g=(O[1],function(){window.location.reload()});return Object(f.jsxs)("div",{children:[!h&&Object(f.jsxs)("center",{className:"confirmationForm",children:[Object(f.jsx)("button",{className:"backButton",onClick:g,children:"pick a different time slot"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p.collection("confirmations").add({Time:u,Reason:r}).then((function(e){alert("Appointment with mentor confirmed on: \n"+t+"\nReason for appointment is :\n"+r),g()})).catch((function(e){console.error("Error booking appointment: ",e),alert("Error booking appointment: ",e)}))},children:[Object(f.jsx)("label",{children:"Reason for booking an appointment:"}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{type:"text",placeholder:"your reason",required:!0,onChange:function(e){o(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:"Selected time slot:"}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{disabled:!0,type:"text",placeholder:t,onChange:function(e){d(JSON.stringify({selectedSlotDateAndTime:t}))}}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{className:"timeStop",type:"submit",children:"Submit"})]})]}),h&&Object(f.jsx)(x,{})]})},h=[];var x=function(e){var t=e.alreadyExistingAppointments,n=e.datePicked,c=Object(a.useState)(!1),r=Object(j.a)(c,2),o=r[0],s=r[1],i=Object(a.useState)(!1),l=Object(j.a)(i,2),b=(l[0],l[1],Object(a.useState)()),u=Object(j.a)(b,2),m=u[0],p=u[1],x=Object(a.useState)(""),g=Object(j.a)(x,2),v=(g[0],g[1],t.calendar.map((function(e){return new Date(Date.parse(e.date_time))}))),S=d()(n).format("YYYY-MM-DD");return h=function(e,t){var n=d()(e,"HH:mm"),a=d()(t,"HH:mm");a.isBefore(n)&&a.add(1,"day");for(var c=[];n<=a;)c.push(new d.a(n).format("HH:mm:ss")),n.add(1,"hours");return c}("01:00","00:00"),Object(f.jsxs)("div",{children:[!o&&Object(f.jsx)("div",{className:"slots",children:h.map((function(e,t){return Object(f.jsx)("button",{className:"timeStop",onClick:function(){return function(e){var t=new Date(S+" "+e);p(t);var n=new Date(S+" "+d()(e,"HH:mm").add(1,"hours").format("HH:mm")),a=v.some((function(e){return t<=e&&e<n}));a?alert("Slot is not available"):s(!0),console.log(a),console.log(t)}(e)},children:e},t)}))}),o&&Object(f.jsx)(O,{selectedSlotDateAndTime:m})]})},g=n(32),v=n.n(g);n(65);var S=function(){var e=Object(a.useState)(new Date),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(j.a)(r,2),s=o[0],u=o[1],d=Object(a.useState)({}),m=Object(j.a)(d,2),p=m[0],O=m[1];function h(){return(h=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://private-37dacc-cfcalendar.apiary-mock.com/mentors/1/agenda");case 3:t=e.sent,O(t.data),console.log(p),u(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Please check your internet connection:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"App-Content",children:[Object(f.jsx)(b.a,{minDate:new Date,onChange:function(e){c(e),function(){h.apply(this,arguments)}()},value:n}),s?Object(f.jsx)(x,{alreadyExistingAppointments:p,datePicked:n}):null,console.log(n)]})};var y=function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("section",{className:"header",children:Object(f.jsx)("h1",{className:"header-title",children:"Career Foundry Calendar"})}),Object(f.jsx)("h3",{className:"instructions",children:"Please select the date you would like to book your appointment"}),Object(f.jsx)("header",{className:"App-Content",children:Object(f.jsx)(S,{})})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),k()}},[[68,1,2]]]);
//# sourceMappingURL=main.68d6c1bc.chunk.js.map